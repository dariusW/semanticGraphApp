<?phpheader('Content-type: application/json');if(!isset($_REQUEST["f"])){	echo '{"error":"no data"}';	return;}$postdata = array(    'charset'  => 'utf-8',    'doctype' => 'SVG 1.1',    'group' => '0',	'user-agent' => 'W3C_Validator/1.3 http://validator.w3.org/services',	'fragment' => $_REQUEST['f']);$data = http_build_query($postdata);	$ch = curl_init();    curl_setopt ($ch, CURLOPT_URL,"http://validator.w3.org/check");     curl_setopt ($ch, CURLOPT_POST, 1);     curl_setopt ($ch, CURLOPT_POSTFIELDS, $data);     curl_setopt ($ch, CURLOPT_COOKIEJAR, realpath('cookie.txt')); // cookie.txt     curl_setopt ($ch, CURLOPT_COOKIEFILE, realpath('cookie.txt'));    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1);    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);	curl_setopt($ch, CURLOPT_VERBOSE, 1);	curl_setopt($ch, CURLOPT_HEADER, 1);    curl_setopt ($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (X11; U; Linux i586; de; rv:5.0) Gecko/20100101 Firefox/5.0');    curl_setopt ($ch, CURLOPT_REFERER, "http://validator.w3.org/");    $response= curl_exec($ch);	$header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);	$header = substr($response, 0, $header_size);	$body = substr($response, $header_size); $headerArray = explode("\n",$header); echo "{"; $json  = ""; foreach($headerArray as $key => $value){	if(1 == preg_match("/^X-W3C-.*$/", $value)){		$a = explode(":",$value);		$json .= '"'.trim($a[0]).'":"'.trim($a[1]).'",';	} } $json = substr($json ,0 , -1); echo $json; echo "}";?>